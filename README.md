Tiny and small web framework
============================

This tiny and small web framework is intended for education of new web programmers. The framework is a relativly small code base containing a structure and a few basic external libraries that could be the core of any larger framework. The intention is to "learn from this example". While you build your website you will have the opportunity to dig into the code base and try to understand its bits and pieces.



**This documentation is to be written**




<!-- Rewrite this to be documentation, learn from the documentation -->




This template contains a working website but there are some things missing that you should fix. Doing so you will have an opportunity to investigate the structure and layout of the template and try to understand how its structure is, how to extend it and come to sense with if the structure is good and helpful.




Get going
----------------------------

Install the needed environment and developer tools.

```
composer install
```

Run the test suite to see that the setup is working as expected.



Create a page using a page controller
----------------------------



Render variables onto a layout
----------------------------




External libraries used
----------------------------

### vlucas/phpdotenv

https://github.com/vlucas/phpdotenv




Development and test environment
----------------------------

You can use the following composer scripts to test and verify your code.

```
composer test
composer test-hard
```

You can run the development tools one by one.

```
composer phpcs      # Code style
composer phpcbf     # Fix code style issues found by phpcs
composer phpmd      # Mess detector
composer phppsalm   # Static code validation
composer phpstan    # Static code validation
```

<!-- document each tool -->

Each tool has its own configuration file, its available in the root of the project.

You can clean up your installation and remove all files and directories that were installed by composer or generated by for some reason. Do it by executing the following command.

```
composer clean      # Clean all generated files, if any
composer clean-all  # Clean all, including installed files
```





The page layout
----------------------------

1. Find the file that is carrying the basic layout for the website. Inspect it and try to understand the code in it.

1. Do also find the function `render()` and see how its structured and what it does with the parameters it takes.

1. Make some changes to the layout file. Perhaps only by adding som text to the footer and header or do some larger changes based on your need to try out things.

1. Remember that the layout page has the structure fo the "whole web page". You can adapt it by modifying it, or you can create a completely new layout for the whole website by just changing this file.



Navbar
----------------------------

1. Find the view file that generates the navbar. You can find it by looking in the layout file.

1. Add a new item to the navbar, call it `"New" => "new.php",`. See that its visible in the web page. Click it to verify you get a 404 (page not found).

1. If you want to study more on this then you can look in the example `example/php/style-active-navbar-item` and review the article that is linked in the example.



Add new pagecontroller
----------------------------

1. Add a new pagecontroller `public/new.php` and add some content into if. Feel free to play around with its content. It is just so that you are aware on how to create a new pagecontroller.

1. Check that the new pagecontroller is clickable in the navbar.

1. You can use this pagecontroller as a way to try out and test various page constructs during the exercise, so just leave it for now.



Page "Home"
----------------------------

1. Replace the text with your own version. You are free to express you as you wish. Get the content from an external file in the `content/` directory.

1. Add something relevant at the aside. Get the content from an external file in the `content/` directory.



Page "Report"
----------------------------

1. Take your report text from the first kmom and add it to the "Report" page below the right heading. Write it in Markdown (or HTML).

1. Add something related in the aside, put that content into `content/` and use Markdown for it.

1. In the aside, see if you can add a list that links internally in this page to the headers in the report page.

1. Roughly read the documentation on the [Markdown parser](https://github.com/erusev/parsedown) and find the code section that parses the text as Markdown to HTML.

1. Also read up on the module [Parsedown Extra](https://github.com/erusev/parsedown-extra) and what it supports.



Page "About"
----------------------------

1. Add content to this page. Reuse the content from your "About" in `me/report`. Put the content into `content/` as HTML or Markdown.

Feel free to express yourself.



Page "Server"
----------------------------

1. Use the `$_SERVER` and replace the current page content with a bit more reader friendly output in the page. Do this by creating and using a new view file.

    1. The details on the referring page, the page visited before this page.

    1. The details on the users browser.

    1. The details on your web servers version.

    1. The details on the request uri.

    1. The number of entries (rows) in the `$_SERVER` array.

Read more on [`$_SERVER` in the manual](https://www.php.net/manual/en/reserved.variables.server.php).



View "measure.php"
----------------------------

The view `view/measure.php` is visible at the bottom of the page "About".

1. Make it also visible on the page "Home" and "Report"

1. Update the view and format its output.

    1. Show the load time in milliseconds (ms) and round to three decimals.

    1. Show the memory used on kilobytes (KB).



View "figure.php"
----------------------------

1. Add two images, using the figure element, to the page "Server" by using a view file.

    1. Create a new view `view/figure.php` that helps you add an image, for example the image `public/img/leaf_256x256.php`, wrapped in a figure element with a figcaption.

    1. Try to make the view reusable by using arguments in the view file. The arguments needed you can "send into the view" by using the concept of `$data`.

    1. Reuse your view and add another image (of your own choice) to the same page.



HTML forms
----------------------------

You can see examples on form elements in the example `example/html/form-element`.

You can see an example on using form elements in the example `example/html/form`.



Page "Form GET"
----------------------------

1. Add a select option to the form and see how it works.

1. Add an password field to the form and see how it works.

1. Add an checkbox (or two) to the form and see how it works.

1. Feel free to try out more HTML form elements, just to play around.

1. This is a self submitting form, what does that mean?

1. Can you identify the query string part in the url? Try to modify it directly to send arguments to the page.

Read more on [`$_GET` in the manual](https://www.php.net/manual/en/reserved.variables.get.php).



Page "Form POST"
----------------------------

1. Do the same updates as in the GET form.

    1. Perhaps consider to move the form elements code to a separate view file to make it easier to reuse between the GET and the POST form, just as an exercise?

1. Show the output of the posted form in a nice and user friendly readable way. That is, format it in a better way than just var-dumping it.

1. The implementation of the POST form is not a self submitting form, it posts to a processing page that shows the results of the posted form.

    1. When you have posted the form and are viewing the combined processing/result page, press `ctrl-r` to reload the page. You should see a warning about the form being posted again.

Read more on [`$_POST` in the manual](https://www.php.net/manual/en/reserved.variables.post.php).



Page "Cookie"
----------------------------

1. Investigate the example and follow the flow:
    1. The pagecontroller `cookie.php` shows the first page.
    1. Submit the form, it is submitted to a processing pagecontroller `cookie-process.php` that is responsible for extracting the form data and update/set the cookie.
    1. The processing page redirects to a resultpage `cookie.php` that shows the "result".

1. Add a checkbox to the form. The checkbox should be checked when the cookie is active (have a value) and it should be unchecked when the cookie does not have a value. Make it readonly so the user can not change its state.

1. Try to answer the question "Why is it important with a processing page"? You may read about it here "[Processingsida och vidare dirigering](https://dbwebb.se/guide/kom-igang-med-programmering-i-php/processingsida-och-vidare-dirigering)".

Read more on [`$_COOKIE` in the manual](https://www.php.net/manual/en/reserved.variables.cookies.php).

<!--
1. Consider, why are all these cookies there and what are they doing?

1. Find the cookies in the browser, they are sent with each request in the header of the request. You should see that the cookies and their values matches in the browser and in the server.

1. Consider, what does it mean that the cookies are visible in plain sight in the server? Can we store sensitive information in the cookies?
-->



Page "Session"
----------------------------

<!--
Uppgift som tvingar att man lägger till något i sessionen.
-->

1. Create a histogram for the dices rolled and show it together with the statistics on the dice rolls.

A histogram shows how many times the dice has rolled 1, 2, 3, 4, 5 and 6 eyes. A simple histogram could look like this for a serie of rolls 1, 1, 2, 3, 5, 6, 6, 6.

1. `**`
2. `*`
3. `*`
4.
5. `*`
6. `***`

You can create the histogram as you wish. Use plain figures, some text graphic, use form elements for graphic or even more advanced. It is fine to make the plain and simple choice, it is just a matter of the visualisation.

Read more on [`$_SESSION` in the manual](https://www.php.net/manual/en/reserved.variables.session.php).



Add a new pagecontroller `game.php`
----------------------------

1. Create a new page "Game", with a new pagecontroller `game.php`.

1. Add a form with a button on it.

1. When the user clicks the button, submit the form using POST to a processing page where you stores something in the session.

1. The processing page should then redirect to a result page.

1. The result page should show the content of the session variable. Make it obvious that the session variable always is updated at each submit.

1. Use view files when its a good option.



How are the functions included?
----------------------------

composer.json autoloader.

Check what functions are included.
 esc
 renderToString



Run the validation tools
----------------------------

Run the test suite to see if you are clean. if you get errors, see if you can fix them or just silently ignore them for another day.

```
composer test
```

You can also try to execute the following validators, they are a bit tougher and we will not try to correct their findings, if any. Not today at least. Another day.

```
composer psalm
composer phpstan
```

You can open up the file `composer.json` to review it for how the scripts are setup.


<!--

phpenv/phpenv
-----------------------

https://github.com/phpenv/phpenv



Debug bar {#debugbar}
-----------------------

PHP Debug Bar är ett verktyg som kan underlätta när man utvecklir sidor och försöker komma igång och förstå hur PHP fungerar.

Om du har composer installerat så kan du installera PHP Debug bar med det.

```text
# Gå till katalogen där du jobbar
composer require maximebf/debugbar
```
-->
